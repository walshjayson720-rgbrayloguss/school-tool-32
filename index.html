<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>School Tool Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --bg:#0b0f1a;
  --panel:#111827;
  --card:#020617;
  --border:#1f2933;
  --accent:#6366f1;
  --text:#e5e7eb;
  --muted:#9ca3af;
}
.light{
  --bg:#f8fafc;
  --panel:#ffffff;
  --card:#f1f5f9;
  --border:#e5e7eb;
  --text:#020617;
  --muted:#64748b;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter,system-ui,Arial,sans-serif;
}
header{
  position:sticky;
  top:0;
  z-index:10;
  background:var(--panel);
  border-bottom:1px solid var(--border);
  padding:10px 16px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.tabs{display:flex;gap:6px;flex-wrap:wrap}
.tab{
  background:transparent;
  color:var(--muted);
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}
.tab.active{background:var(--accent);color:white}
button.action{
  background:var(--accent);
  color:white;
  border:none;
  padding:8px 12px;
  border-radius:8px;
  cursor:pointer;
}
.container{padding:24px}
.box{
  max-width:900px;
  margin:auto;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:20px;
}
.hidden{display:none}
input,textarea,select{
  width:100%;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:8px;
  padding:10px;
  color:var(--text);
  margin-top:6px;
}
.item{padding:10px;border-bottom:1px solid var(--border)}
.progress{
  background:var(--card);
  border-radius:999px;
  overflow:hidden;
  height:10px;
  margin:10px 0;
}
.progress div{
  height:100%;
  background:linear-gradient(90deg,#22c55e,#16a34a);
  width:0%;
}
.ai-bubble{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:10px;
  padding:12px;
  margin-top:10px;
  white-space:pre-wrap;
}
mark{
  background:#fde047;
  color:black;
  padding:0 3px;
  border-radius:4px;
}
</style>
</head>
<body>

<header>
  <div class="tabs">
    <button class="tab active" onclick="openTab('homework',this)">Homework</button>
    <button class="tab" onclick="openTab('notes',this)">Notes</button>
    <button class="tab" onclick="openTab('essay',this)">Essay</button>
    <button class="tab" onclick="openTab('calc',this)">Calculator</button>
    <button class="tab" onclick="openTab('grammar',this)">Grammar</button>
    <button class="tab" onclick="openTab('ai',this)">AI</button>
  </div>
  <div>
    <button class="action" id="themeBtn">Theme</button>
    <button class="action" id="blankBtn">about:blank</button>
  </div>
</header>

<div class="container">

<div id="homework" class="box">
  <h3>Homework Planner</h3>
  <input id="hwTitle" placeholder="Assignment">
  <input id="hwClass" placeholder="Class">
  <input id="hwDate" type="date">
  <button class="action" onclick="addHomework()">Add</button>
  <div class="progress"><div id="hwProgress"></div></div>
  <div id="hwList"></div>
</div>

<div id="notes" class="box hidden">
  <h3>Notes</h3>
  <input id="noteClass" placeholder="Class">
  <textarea id="noteText"></textarea>
  <button class="action" onclick="saveNote()">Save</button>
  <div id="noteList"></div>
</div>

<div id="essay" class="box hidden">
  <h3>Essay Outline</h3>
  <input id="essayTopic" placeholder="Topic">
  <button class="action" onclick="generateOutline()">Generate</button>
  <div id="essayOutput"></div>
</div>

<div id="calc" class="box hidden">
  <h3>Calculator</h3>
  <input id="calcInput">
  <button class="action" onclick="calculate()">Calculate</button>
  <div id="calcResult"></div>
</div>

<div id="grammar" class="box hidden">
  <h3>Grammar Corrector (Highlighted)</h3>
  <textarea id="grammarInput" rows="5"></textarea>
  <button class="action" onclick="fixGrammar()">Fix Grammar</button>
  <div id="grammarOutput" class="ai-bubble"></div>
</div>

<div id="ai" class="box hidden">
  <h3>AI Assistant</h3>
  <input id="aiInput" placeholder="Write an introduction about...">
  <button class="action" onclick="askAI()">Ask</button>
  <div id="aiOutput" class="ai-bubble"></div>
</div>

</div>

<script>
blankBtn.onclick=()=>{
  const w=window.open("about:blank");
  w.document.write(`<iframe src="${location.href}" style="border:none;width:100vw;height:100vh"></iframe>`);
};

if(localStorage.theme==="light")document.body.classList.add("light");
themeBtn.onclick=()=>{
  document.body.classList.toggle("light");
  localStorage.theme=document.body.classList.contains("light")?"light":"dark";
};

function openTab(id,btn){
  document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  btn.classList.add("active");
}

function fixGrammar(){
  let t=grammarInput.value.trim().replace(/\s+/g," ");
  const fixes={teh:"the",dont:"don't",cant:"can't",im:"I'm",alot:"a lot"};
  for(const k in fixes){
    t=t.replace(new RegExp(`\\b${k}\\b`,"gi"),`<mark>${fixes[k]}</mark>`);
  }
  t=t.replace(/(^\w|[.!?]\s+\w)/g,m=>`<mark>${m}</mark>`);
  if(!/[.!?]$/.test(t))t+=`<mark>.</mark>`;
  grammarOutput.innerHTML=t;
}

function askAI(){
  const q=aiInput.value.toLowerCase();
  let out="";
  if(q.includes("introduction")){
    out="This introduction presents the topic clearly and provides background information while ending with a strong thesis statement that sets up the rest of the essay.";
  }else if(q.includes("body paragraph")){
    out="This body paragraph explains the main idea, supports it with evidence, and connects it back to the thesis through clear reasoning.";
  }else if(q.includes("conclusion")){
    out="In conclusion, the topic is summarized by restating the thesis, reviewing key points, and leaving the reader with a final thought.";
  }else{
    out="I can write essay paragraphs, explain topics, or help you study. Try asking for an introduction, body paragraph, or conclusion.";
  }
  aiOutput.innerText=out;
}

function calculate(){
  try{calcResult.innerText=eval(calcInput.value);}
  catch{calcResult.innerText="Error";}
}

function generateOutline(){
  essayOutput.innerHTML="<b>Introduction</b><br>• Hook<br>• Thesis<br><br><b>Body</b><br>• Point 1<br>• Point 2<br><br><b>Conclusion</b>";
}
</script>

</body>
</html>
